import{_ as s,o as n,c as a,S as l}from"./chunks/framework.8730e13d.js";const d=JSON.parse('{"title":"NPM 私有仓库搭建","description":"","frontmatter":{},"headers":[],"relativePath":"linux/npm-private-repo.md","filePath":"linux/npm-private-repo.md","lastUpdated":1674142373000}'),p={name:"linux/npm-private-repo.md"},o=l(`<h1 id="npm-私有仓库搭建" tabindex="-1">NPM 私有仓库搭建 <a class="header-anchor" href="#npm-私有仓库搭建" aria-label="Permalink to &quot;NPM 私有仓库搭建&quot;">​</a></h1><blockquote><p>前言：由于公司服务器更换导致之前搭建的npm私库挂了，正好顺带记录一下搭建私库的流程😄。</p></blockquote><h2 id="为什么要搭建-npm-私库" tabindex="-1">为什么要搭建 npm 私库 <a class="header-anchor" href="#为什么要搭建-npm-私库" aria-label="Permalink to &quot;为什么要搭建 npm 私库&quot;">​</a></h2><p>一般我们使用的npm源或者国内镜像源都是将包存储在外网，部署的包不具有私密性，当你需要部署一个公司内部使用的组件库或者解耦独立出一些工具包时。这时，npm私库就会派上用场了。</p><h2 id="linux-服务器准备工作" tabindex="-1">linux 服务器准备工作 <a class="header-anchor" href="#linux-服务器准备工作" aria-label="Permalink to &quot;linux 服务器准备工作&quot;">​</a></h2><p><strong>安装Node环境</strong> <a href="http://nodejs.cn/download/" target="_blank" rel="noreferrer"> Node.js 中文网</a></p><ul><li><p>下载安装包（网速不好情况下，也可以手动在win环境下载linux包再上传）</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 这里以最新版为例</span></span>
<span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npmmirror.com/mirrors/node/v16.14.2/node-v16.14.2-linux-x64.tar.xz</span></span></code></pre></div></li><li><p>解压</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 解压后生成 node-v16.14.2-linux-x64</span></span>
<span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-zxv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node-v16.14.2-linux-x64.tar.xz</span></span></code></pre></div></li><li><p>添加环境变量（或软连接）</p><p>解压完成之后，仅在<code>node-v16.14.2-linux-x64/bin</code>文件夹下使用<code>node</code>命令。所以需要此步骤，让我们在任何目录下均可以使用</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 使用vim编辑，未安装需提前安装</span></span>
<span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在最后一行插入</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 将下方...替换为你的安装目录</span></span>
<span class="line"><span style="color:#FFCB6B;">:export</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PATH=</span><span style="color:#A6ACCD;">$PATH</span><span style="color:#C3E88D;">:/.../node-v16.14.2-linux-x64/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 保存退出，执行配置生效</span></span>
<span class="line"><span style="color:#82AAFF;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/profile</span></span></code></pre></div></li><li><p>测试</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># node 版本号</span></span>
<span class="line"><span style="color:#FFCB6B;">node</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"><span style="color:#FFCB6B;">v16.14.2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># npm 版本号</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"><span style="color:#FFCB6B;">v8.5.0</span></span></code></pre></div></li></ul><h2 id="开始搭建" tabindex="-1">开始搭建 <a class="header-anchor" href="#开始搭建" aria-label="Permalink to &quot;开始搭建&quot;">​</a></h2><p><strong>1. 安装私库包 <code>verdaccio</code></strong></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 先设置国内npm镜像源，加快下载速度</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmmirror.com/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装 verdaccio</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 测试</span></span>
<span class="line"><span style="color:#FFCB6B;">verdaccio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"><span style="color:#FFCB6B;">v5.10.0</span></span></code></pre></div><p><strong>2. 启动 <code>verdaccio</code></strong></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 直接执行 出现以下日志打印则启动成功</span></span>
<span class="line"><span style="color:#FFCB6B;">verdaccio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Creating</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/deploy/verdaccio/config.yaml</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">warn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/deploy/verdaccio/config.yaml</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">node:18079</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> Warning: Verdaccio doesn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">t need superuser privileges. don</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">t run it under root</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Use</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">node</span><span style="color:#C3E88D;"> --trace-warnings ...</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">warning</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">created</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">node:18079</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">LRU_CACHE_OPTION_maxAge</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> DeprecationWarning: The maxAge option is deprecated. Please use options.ttl instead.</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">node:18079</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> Warning: Verdaccio doesn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">t need superuser privileges. don</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">t run it under root</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">warn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Plugin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successfully</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">loaded:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio-htpasswd</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">warn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Plugin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successfully</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">loaded:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio-audit</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">warn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:4873/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio/5.10.0</span></span></code></pre></div><p>现在你可以在本机查看到4873端口已成功开启<code>verdaccio</code>服务</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 查看端口占用情况</span></span>
<span class="line"><span style="color:#FFCB6B;">netstat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ntulp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4873</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 显示结果类似如下</span></span>
<span class="line"><span style="color:#FFCB6B;">tcp</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">localhost:4873</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">LISTEN</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">xxxx/Verdaccio</span></span></code></pre></div><p>这个时候你可能开始尝试用本机浏览器访问服务器<code>ip:4873</code>, 结果仍然访问失败☹。所以你要开始修改verdaccio默认配置了。</p><p><strong>3. verdaccio 配置</strong></p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>localhost</strong> 或者 <strong>127.0.0.1</strong>只可以在同主机上访问，要想在任何主机地址访问到服务器上某端口，需要修改为 <strong>0.0.0.0</strong>。</p></div><p>启动<code>verdaccio</code>后，其自动在当前目录生成两个文件夹：<code>storage</code>、<code>verdaccio</code>, 我们需要修改的配置文件在<code>verdaccio/config.yaml</code>位置。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio/config.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查找到 listen 这一行，取消listen注释并追加地址</span></span>
<span class="line"><span style="color:#FFCB6B;">listen:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#C3E88D;">.0.0:4873</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查找 publish 这一行</span></span>
<span class="line"><span style="color:#FFCB6B;">publish:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">allow_offline:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 允许离线发布</span></span></code></pre></div><p>更多配置可了解 <a href="https://verdaccio.org/docs/what-is-verdaccio" target="_blank" rel="noreferrer">verdaccio文档</a></p><p>这时我们再启动 <code>verdaccio</code>，发现一切都大功告成了。</p><p>No😓, 当我们完成退出服务器连接时，发现启动的服务也自动关闭了。所以，有了一个叫进程守护的东西 --<code>pm2</code>。</p><h2 id="部署服务" tabindex="-1">部署服务 <a class="header-anchor" href="#部署服务" aria-label="Permalink to &quot;部署服务&quot;">​</a></h2><p>pm2：用于将我们前台开启的node服务转变为后台挂起状态，并对其状态进行监测管理。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pm2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 测试</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"><span style="color:#FFCB6B;">5.2.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用 pm2 启动 verdaccio （先结束掉之前开启的verdaccio）</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#82AAFF;">which</span><span style="color:#C3E88D;"> verdaccio</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看pm2内服务状态</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ls</span></span>
<span class="line"><span style="color:#FFCB6B;">┌─────┬──────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐</span></span>
<span class="line"><span style="color:#FFCB6B;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">id</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">namespace</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mode</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pid</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uptime</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">↺</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cpu</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mem</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">watching</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│</span></span>
<span class="line"><span style="color:#FFCB6B;">├─────┼──────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤</span></span>
<span class="line"><span style="color:#FFCB6B;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">default</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">N/A</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fork</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7488</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">15</span><span style="color:#C3E88D;">h</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">online</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">114.4</span><span style="color:#C3E88D;">mb</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">disabled</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│</span></span>
<span class="line"><span style="color:#FFCB6B;">│─────│──────────────│─────────────│─────────│─────────│──────────│────────│──────│───────────│──────────│──────────│──────────│──────────│</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 最后检查端口情况</span></span>
<span class="line"><span style="color:#FFCB6B;">netstat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ntulp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4873</span></span>
<span class="line"><span style="color:#FFCB6B;">tcp</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">0.0</span><span style="color:#C3E88D;">.0.0:4873</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">LISTEN</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">7488</span><span style="color:#C3E88D;">/Verdaccio</span></span></code></pre></div><p>最后，若服务器开启防火墙则需要将4873端口放行，若类似阿里云等云服务器需平台开放端口才可访问，最后即可完成本地的私库访问了。</p><h2 id="发布第一个包" tabindex="-1">发布第一个包 <a class="header-anchor" href="#发布第一个包" aria-label="Permalink to &quot;发布第一个包&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 设置npm源为服务器私库地址 （建议使用yrm管理多源切换）</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://</span><span style="color:#A6ACCD;">*****</span><span style="color:#C3E88D;">:4873</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 首次发包需要添加npm账号 按照提示填写用户名、密码、邮箱</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">adduser</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 发布你的第一个包吧！</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span></span></code></pre></div>`,28),e=[o];function c(t,r,C,y,i,D){return n(),a("div",null,e)}const E=s(p,[["render",c]]);export{d as __pageData,E as default};
